<Project Sdk="Microsoft.NET.Sdk">

  <!-- The VSSDK targets need to be imported after the Net.Sdk targets which means we  have to import the
       .NET.Sdk targets using Import rather than specifying it as the Sdk in the Project element. -->
  <Import Project="Sdk.props" Sdk="Microsoft.NET.Sdk" />

  <PropertyGroup>
    <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
  </PropertyGroup>

  <PropertyGroup Label="Specify which VS-specific refs are required">
    <RequiresShell>true</RequiresShell>
    <!-- Conditional compilation constant for VS2019-specific code.
         We'd prefer to set this the shared SonarLint.VSSpecificAssemblies.props file, but
         the IDE isn't picking up the setting if we do that. -->
    <DefineConstants Condition="($(VisualStudioVersion)=='16.0' AND $(BuildingInsideVisualStudio)=='true') OR $(VSTargetVersion)=='2019'">$(DefineConstants);VS2019</DefineConstants>
  </PropertyGroup>
  <Import Project="..\SonarLint.VSSpecificAssemblies.props" />

  <PropertyGroup>
    <TargetFramework>net46</TargetFramework>
    <ProjectGuid>{8D0D5AF0-D5B7-41ED-9EC6-9E10C66B37E0}</ProjectGuid>
    <RootNamespace>SonarLint.VisualStudio.IssueVisualization.Security</RootNamespace>
    <AssemblyName>SonarLint.VisualStudio.IssueVisualization.Security</AssemblyName>
    <RequiresSigning>true</RequiresSigning>
    <CopyBuildOutputToOutputDirectory>true</CopyBuildOutputToOutputDirectory>

    <!-- Vsix -->
    <GeneratePkgDefFile>true</GeneratePkgDefFile>
    <CreateVsixContainer>false</CreateVsixContainer>
    <CopyVsixManifestToOutput>false</CopyVsixManifestToOutput>

  </PropertyGroup>

  <ItemGroup Label="Framework references">
    <Reference Include="System.ComponentModel.Composition" />
    <Reference Include="PresentationCore" />
    <Reference Include="PresentationFramework" />
    <Reference Include="System.Windows.Presentation" />
    <Reference Include="System.Xaml" />
    <Reference Include="System.Drawing" />
    <Reference Include="WindowsBase" />
  </ItemGroup>

  <ItemGroup Label="Package references">
    <PackageReference Include="Microsoft.VisualStudio.ComponentModelHost" Version="14.0.25424" />
    <PackageReference Include="Microsoft.VisualStudio.Language.Intellisense" Version="14.0.23205" />
    <PackageReference Include="Microsoft.VisualStudio.Shell.14.0" Version="14.3.25407"/>
  </ItemGroup>

  <ItemGroup Label="Project references">
    <ProjectReference Include="..\Core\Core.csproj" />
    <ProjectReference Include="..\IssueViz\IssueViz.csproj" />
  </ItemGroup>

  <Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk" />
  <Import Project="$(VSToolsPath)\VSSDK\Microsoft.VsSDK.targets" Condition="'$(VSToolsPath)' != ''" />

</Project>
